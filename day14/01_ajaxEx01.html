<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /*
        .are-you-serious-regular {
            font-family: "Are You Serious", cursive;
            font-family: "Creepster", system-ui;
            font-weight: 400;
            font-style: normal;
        }
        */
        body{
            text-align: center;
        }
        header{
            margin: 50px auto;
        }
        header>h1{
            font-family: "Creepster", system-ui;
        }
        header>h3{
            font-family: "Are You Serious", cursive;
            font-size: 24px;
        }
        section{
            display: flex;
            justify-content: center;
        }
        section>div{
            margin: 0 20px;
            text-align: left;
            border: 1px solid rgb(182, 182, 182);
            padding: 10px;
            border-radius: 20px;
            box-shadow: 5px 5px 5px rgb(182, 182, 182);
        }
        section>div>div:first-child{
            font-family: "Creepster", system-ui;
            font-size: 18px;
        }

    </style>
    
</head>
<body>
    <!-- 
    https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json
    -->
    <header id="header"></header>
    <section id="section"></section>

    <script>
        const header = document.getElementById('header');
        const section = document.getElementById('section');

        // HTML 문서가 로딩되면 호출
        // DOMContentLoaded 
        // HTML 문서가 완전히 로드되고 DOM 구조가 준비되었을 때 발생
        document.addEventListener('DOMContentLoaded', ()=>{
            superHero().then(result => printData(result));
        });

        // 데이터 로드
        async function superHero(){
            try{
                const resp = await fetch('https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json');
                const result = await resp.json();
                return result;
            }catch(error){
                console.log(error);
            }
        }

        // 출력 함수
        function printData(obj){
            console.log(obj);
            // header => h1 / h3
            // h1 => squadName
            // h3 => HomeTown / Formed
            let str='';
            str += `<h1>${obj.squadName}</h1>`;
            str += `<h3> HomeTown : ${obj.homeTown} // Formed : ${obj.formed} </h3>`;

            header.innerHTML = str;

            // section => div => div*4 => 마지막 div => ul => li
            for(let i=0; i<obj.members.length; i++){
                let member = obj.members[i];
                console.log(member);
                let memberStr = '<div>';
                    memberStr += `<div>${member.name}</div>`;
                    memberStr += `<div>SecretIdentity : ${member.secretIdentity}</div>`;
                    memberStr += `<div>Age : ${member.age}</div>`;
                    memberStr += `<div>SuperPowers : <ul id="power${i}"></ul>`;
                    // memberStr += `<div>SuperPowers : <ul>`;
                    //    // ul => li
                    //    for(const p of member.powers){
                    //        memberStr += `<li>${p}</li>`;
                    //    }
                    //memberStr += '</ul>';
                    memberStr += `</div></div>`; 
                section.innerHTML += memberStr;
                member.powers.forEach(v=>{
                    document.getElementById(`power${i}`).innerHTML +=
                    `<li>${v}</li>`;
                });
            }
        }

    </script>
 
</body>
</html>